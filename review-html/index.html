<html>
	<head>
		<title>game-api</title>
		<link rel='stylesheet' href='assets/css/style.css'>
		<link rel='stylesheet' href='assets/css/shCoreEclipse.css'>
		<link rel='stylesheet' href='assets/css/shThemeEclipse.css'>
		<script type='text/javascript' src='assets/js/jquery.min.js'></script>
		<script type='text/javascript' src='assets/js/shCore.js'></script>
		<script type='text/javascript' src='assets/js/shBrushJava.js'></script>
		<script type='text/javascript' src='assets/js/shBrushXml.js'></script>
		<script type='text/javascript' src='assets/js/shBrushPlain.js'></script>
		<script type='text/javascript' src='assets/js/content.js'></script>
		<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
	</head>
	<body>
		<div id='wrapper'>
			<h1>Revue : game-api</h1>
			<div id='general-comments'>
				<h2>Commentaires g&eacute;n&eacute;raux</h2>
				<ul>
					<li class='taggable' data-tag='null'>Très beau Readme (simple et claire). Par contre, vous parlez seulement de /turn et /reset.</li>
					<li class='taggable' data-tag='null'>Tip: n'utilisez jamais le mot clé "static" sauf pour créer des "constantes privées", en écrivant "private static final".</li>
					<li class='taggable' data-tag='null'>La visibilité de TOUTES les propriétés/méthodes d'une classe doivent être explicites (ex: private). Assurez-vous de restreindre la visibilité le plus possible afin d'empêcher leur mauvaise utilisation.</li>
					<li class='taggable' data-tag='null'>Bravo d'avoir utilisé des assemblers! Cependant, assurez-vous de rendre tous les DTOs immutables en mettant SEULEMENT des Getters (aucun setters). Vos paramètres seront définit uniquement dans le constructeur.</li>
					<li class='taggable' data-tag='null'>N'utilisez pas les variables de classes directement. Passez TOUJOURS par des Getters/Setters (on peut en discuter lundi si vous voulez plus de détails sur cette norme Java).</li>
					<li class='taggable' data-tag='null'>Le terme "ZooManager" est TRÈS inaproprié pour diverses raison. 1) Ce n'est pas un Zoo, c'est un park de dinosaures. 2) Le terme "Manager" c'est 99% un gros smell qui suggère un domaine anémique.</li>
					<li class='taggable' data-tag='null'>Vos tests doivent mocker les services différents de celui testés.</li>
					<li class='taggable' data-tag='null'>Il vous manque énormément de tests dans votre couche applicative.</li>
					<li class='taggable' data-tag='null'>Vos repository devrait seulement persister le domaine d'affaires lors de la complètion d'un tour, sinon vous allez-vous retrouver à persister un état invalid. (exception pour la liste d'action "en attente" qui doit être persister à chaque ajout d'action)</li>
					<li class='taggable' data-tag='null'>Votre code coverage de 67% suggère que plusieurs classes importantes ne sont pas testées. On s'attend à ce que votre coverage soit en haut de ~80%.</li>
					<li class='taggable' data-tag='null'>Ne testez pas les setters ou getters unitairement. C'est inutile, sauf s'ils contiennent de la logique.</li>
					<li class='taggable' data-tag='null'>Déplacez vos factory dans votre couche applicative. Le domaine n'a pas besoin de le connaître, c'est votre couche applicative qui va les utiliser.</li>
					<li class='taggable' data-tag='null'>Pas besoin de créer une classe pour Salad, Burger et Water. La seule différence entre les trois, pour l'instant, est la date d'expiration. Faites seulement le passer en paramètre. BEAUCOUP moins compliqué.</li>
					<li class='taggable' data-tag='null'>Aucun tests.</li>
					<li class='taggable' data-tag='null'>Une fois que vos mappers seront refactorés, testez au moins un des mappers en appellant la méthode toResponse. Pas besoin de toutes les tester car ils implémentent tous la même logique, c'est seulement le message et le statut qui change.</li>
					<li class='taggable' data-tag='null'>Dans les tests unitaires, on veut un espace entre chaque section "GIVEN", "WHEN" et "THEN". Des fois, vous avez plus que trois sections. Des fois, le When est collé au Then ou le Given est à la place du When. Le positionnement de chaque ligne de code dans les tests est important.</li>
					<li class='taggable' data-tag='null'>Parfois la première ligne suite à la définition d'une classe c'est un espace et parfois non.</li>
					<li class='taggable' data-tag='null'>Éviter de commencer une méthode par un espace.</li>
					<li class='taggable' data-tag='null'>Espacement vertical inapproprié [G10]</li>
					<li class='taggable' data-tag='null'>Attention au dead code!</li>
				</ul>
			</div>

			<div id='architecture-comments'>
				<h2>Commentaires architecturaux</h2>
				<ul>
					<li class='taggable' data-tag='null'>Global Exceptions package n'est pas pertinent. Les exceptions doivent être dans la couche qui les utilisent. Les mappers/dtos sont un concern du UI.</li>
					<li class='taggable' data-tag='null'>Assurez-vous de déplacer vos Assemblers + DTOs de votre couche applicative DANS votre couche applicative.</li>
					<li class='taggable' data-tag='null'>Vos repositories ne doivent absolument pas remplacer le in-memory de votre domaine d'affaires. Votre couche applicative devrait faire vivre votre domaine indépendamment de si vous avez un repository ou non.</li>
				</ul>
			</div>

			<div id='file-reviews'>
				<div id='file-comments'>
					<h3 class=foldable>Action</h3>
				<ul>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 5 : Pour respecter le patron Command, transformer votre classe Action en interface qui contient seulement la méthode execute.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [5]'>package ca.ulaval.glo4002.game.domain.actions;
&nbsp;
import java.util.UUID;
&nbsp;
public abstract class Action {
    private final UUID id;
    private final Object object;
    private final Object objectRepository;
&nbsp;
    public Action(UUID id, Object object, Object objectRepository) {
        this.id = id;
        this.object = object;
        this.objectRepository = objectRepository;
    }
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 6 : Pas besoin de UUID.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [6]'>package ca.ulaval.glo4002.game.domain.actions;
&nbsp;
import java.util.UUID;
&nbsp;
public abstract class Action {
    private final UUID id;
    private final Object object;
    private final Object objectRepository;
&nbsp;
    public Action(UUID id, Object object, Object objectRepository) {
        this.id = id;
        this.object = object;
        this.objectRepository = objectRepository;
    }
&nbsp;
    public UUID getId() {
</pre></div></li>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 8 : Retirez tous les repository de vos actions.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [8]'>package ca.ulaval.glo4002.game.domain.actions;
&nbsp;
import java.util.UUID;
&nbsp;
public abstract class Action {
    private final UUID id;
    private final Object object;
    private final Object objectRepository;
&nbsp;
    public Action(UUID id, Object object, Object objectRepository) {
        this.id = id;
        this.object = object;
        this.objectRepository = objectRepository;
    }
&nbsp;
    public UUID getId() {
        return id;
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 10 : Vous avez lu le pattern Command. Les paramètres doivent être passés dans le constrcteur comme vous le faites. Cependant, n'utilisez pas Object. Préciser le type correctement. Sinon, ça vous oblige de faire de la conversion/gestion de type partout ce qui augmente de beaucoup votre risque de faire des erreurs.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.domain.actions;
&nbsp;
import java.util.UUID;
&nbsp;
public abstract class Action {
    private final UUID id;
    private final Object object;
    private final Object objectRepository;
&nbsp;
    public Action(UUID id, Object object, Object objectRepository) {
        this.id = id;
        this.object = object;
        this.objectRepository = objectRepository;
    }
&nbsp;
    public UUID getId() {
        return id;
    }
&nbsp;
    public Object getObject() {
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ActionFactory</h3>
				<ul>
						<li class='taggable' data-tag='Important'><img src='assets/images/Important.png' />&nbsp;Ligne 17 : Les "conclusions" doivent également être des "actions". <img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 7; highlight: [17]'>import ca.ulaval.glo4002.game.domain.resources.ResourceElements;
import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
&nbsp;
public class ActionFactory {
    public Action create(Dinosaur dinosaur, DinosaurRepository dinosaurRepository) {
        return new AddDino(UUID.randomUUID(), dinosaur, dinosaurRepository);
    }
&nbsp;
    public Action create(ResourceElements resource, ResourceRepository resourceRepository) {
        return new AddResource(UUID.randomUUID(), resource, resourceRepository);
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ActionRepository</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 10 : Dead code [G9]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.domain.actions;
&nbsp;
import java.util.List;
&nbsp;
public interface ActionRepository {
    void save(Action action);
&nbsp;
    List&lt;Action> getWaitingActions();
&nbsp;
    void addElementToActionWaitingList(Object element);
&nbsp;
    void execute();
&nbsp;
    void reset();
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ActionRepositoryInMemory</h3>
				<ul>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 10 : "waitingActions" devrait être "actions". 1) le fait d'être waiting c'est un concern du domaine d'affaires. Que votre implémentation soit au courant, sans que ce soit définit dans votre interface suggère que votre repo gère secrètement de la logique d'affaires.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.repositories.actions;
&nbsp;
import java.util.ArrayList;
import java.util.List;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
import ca.ulaval.glo4002.game.domain.actions.ActionRepository;
&nbsp;
public class ActionRepositoryInMemory implements ActionRepository {
    private final List&lt;Action> waitingActions = new ArrayList&lt;>();
&nbsp;
    @Override
    public void save(Action action) {
        waitingActions.add(action);
    }
&nbsp;
    @Override
    public List&lt;Action> getWaitingActions() {
        return waitingActions;
    }
</pre></div></li>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 10 : Essayez de persister seulement vos têtes d'aggrégats. Dans ce cas, ça devrait être "Turn" vu que c'est lui qui contient vos listes d'action.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.repositories.actions;
&nbsp;
import java.util.ArrayList;
import java.util.List;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
import ca.ulaval.glo4002.game.domain.actions.ActionRepository;
&nbsp;
public class ActionRepositoryInMemory implements ActionRepository {
    private final List&lt;Action> waitingActions = new ArrayList&lt;>();
&nbsp;
    @Override
    public void save(Action action) {
        waitingActions.add(action);
    }
&nbsp;
    @Override
    public List&lt;Action> getWaitingActions() {
        return waitingActions;
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 22 à 29 : Non.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 12; highlight: [22, 23, 24, 25, 26, 27, 28, 29]'>    @Override
    public void save(Action action) {
        waitingActions.add(action);
    }
&nbsp;
    @Override
    public List&lt;Action> getWaitingActions() {
        return waitingActions;
    }
&nbsp;
    @Override
    public void execute() {
        for (Action action : waitingActions) {
            action.execute();
        }
&nbsp;
        waitingActions.clear();
    }
&nbsp;
    @Override
    public void addElementToActionWaitingList(Object element) {
    }
&nbsp;
    @Override
    public void reset() {
        waitingActions.clear();
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 31 à 33 : Dead code [G9]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 21; highlight: [31, 32, 33]'>&nbsp;
    @Override
    public void execute() {
        for (Action action : waitingActions) {
            action.execute();
        }
&nbsp;
        waitingActions.clear();
    }
&nbsp;
    @Override
    public void addElementToActionWaitingList(Object element) {
    }
&nbsp;
    @Override
    public void reset() {
        waitingActions.clear();
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>AppConfig</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 51 à 57 : Mettre "private".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 41; highlight: [51, 52, 53, 54, 55, 56, 57]'>import ca.ulaval.glo4002.game.exceptions.exceptionMappers.InvalidWeightExceptionMapper;
import ca.ulaval.glo4002.game.exceptions.exceptionMappers.NotExistentNameExceptionMapper;
import ca.ulaval.glo4002.game.exceptions.exceptionMappers.UnknownExceptionGrabber;
import ca.ulaval.glo4002.game.repositories.actions.ActionRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.dinosaur.DinosaurRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.resources.ResourceRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.turn.TurnRepositoryInMemory;
&nbsp;
public class AppConfig {
    // Turn
    static TurnFactory turnFactory = new TurnFactory();
    static TurnRepository turnRepository = new TurnRepositoryInMemory();
    static ResourceRepository resourceRepository = new ResourceRepositoryInMemory();
    static ActionRepository actionRepository = new ActionRepositoryInMemory();
    static ActionFactory actionFactory = new ActionFactory();
    static SpeciesDietsCorrespondances speciesDietsCorrespondances = new SpeciesDietsCorrespondances();
    static ZooManager zooManager = new ZooManager();
&nbsp;
    // Dinosaur
    static DinosaurRepository dinosaurRepository = new DinosaurRepositoryInMemory();
    static DinosaurFactory dinosaurFactory = new DinosaurFactory(dinosaurRepository, speciesDietsCorrespondances);
    static DinosaurAssembler dinosaurAssembler = new DinosaurAssembler();
    static DinosaurUseCase dinosaurUseCase = new DinosaurUseCase(dinosaurFactory, dinosaurRepository, dinosaurAssembler, actionRepository, actionFactory);
&nbsp;
    static DinosaurDtoAssembler dinosaurDtoAssembler = new DinosaurDtoAssembler();
    static DinosaurResource dinosaurResource = new DinosaurResource(dinosaurUseCase, dinosaurDtoAssembler);
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 86 : Vous créez une "Application" pour rien. Créez un "ResourceConfig" à la place.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 76; highlight: [86]'>    static ResourceDtoAssembler resourceDtoAssembler = new ResourceDtoAssembler();
    static ResourceResource resourceResource = new ResourceResource(resourceUseCase, resourceDtoAssembler);
&nbsp;
    // Bebe
    static BabyAssembler babyAssembler = new BabyAssembler();
    static BabyUseCase bebeUseCase = new BabyUseCase(dinosaurRepository, babyAssembler, actionRepository, actionFactory, dinosaurFactory);
&nbsp;
    static BabyDtoAssembler babyDtoAssembler = new BabyDtoAssembler();
    static BabyResource babyResource = new BabyResource(bebeUseCase, babyDtoAssembler);
&nbsp;
    public static ResourceConfig packageConfig = ResourceConfig.forApplication(new Application() {
        @Override
        public Set&lt;Object> getSingletons() {
            Set&lt;Object> resources = new HashSet&lt;>();
            resources.add(resourceResource);
            resources.add(turnResource);
            resources.add(dinosaurResource);
            resources.add(babyResource);
            resources.add(new InvalidResourceExceptionMapper());
            resources.add(new UnknownExceptionGrabber());
            resources.add(new NotExistentNameExceptionMapper());
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 93 : Appellez des méthodes privées qui vont créer vos ressources par concern. ex: createFoodResource<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 83; highlight: [93]'>    static BabyDtoAssembler babyDtoAssembler = new BabyDtoAssembler();
    static BabyResource babyResource = new BabyResource(bebeUseCase, babyDtoAssembler);
&nbsp;
    public static ResourceConfig packageConfig = ResourceConfig.forApplication(new Application() {
        @Override
        public Set&lt;Object> getSingletons() {
            Set&lt;Object> resources = new HashSet&lt;>();
            resources.add(resourceResource);
            resources.add(turnResource);
            resources.add(dinosaurResource);
            resources.add(babyResource);
            resources.add(new InvalidResourceExceptionMapper());
            resources.add(new UnknownExceptionGrabber());
            resources.add(new NotExistentNameExceptionMapper());
            resources.add(new InvalidGenderExceptionMapper());
            resources.add(new InvalidSpeciesExceptionMapper());
            resources.add(new InvalidWeightExceptionMapper());
            resources.add(new DuplicateNameExceptionMapper());
            resources.add(new InvalidMotherExceptionMapper());
            resources.add(new InvalidFatherExceptionMapper());
            return resources;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>BabyResource</h3>
				<ul>
						<li class='taggable' data-tag='Important'><img src='assets/images/Important.png' />&nbsp;Ligne 35 à 49 : Cette méthode a BEAUCOUP trop de responsabilités. Grâve violation du SRP.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]'>&nbsp;
    public BabyResource(BabyUseCase bebeUseCase, BabyDtoAssembler babyDtoAssembler) {
        this.bebeUseCase = bebeUseCase;
        this.babyDtoAssembler = babyDtoAssembler;
    }
&nbsp;
    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createBebe(BabyRequest babyRequest) {
        // Get Bebe dinosaur's parents
        ExternalApiCreationDto externalApiCreationDto;
        externalApiCreationDto = bebeUseCase.getParentsSpecies(babyRequest.fatherName, babyRequest.motherName);
&nbsp;
        // Call to external API
        Client client = ClientBuilder.newClient();
        Response response = client.target("http://localhost:8080/breed").request(MediaType.APPLICATION_JSON)
            .post(Entity.entity(externalApiCreationDto, MediaType.APPLICATION_JSON));
        if (response.getStatusInfo().getFamily().name().equals("SUCCESSFUL")) {
            ExternalApiBebeListDto externalApiBebeListDto = response.readEntity(ExternalApiBebeListDto.class);
            BabyCreationDto dto = babyDtoAssembler.fromRequest(babyRequest, externalApiBebeListDto);
            bebeUseCase.createBebe(dto);
        }
&nbsp;
        return Response.status(Response.Status.OK).build();
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 : Un commentaire dans l'application c'est un signe que votre code n'est pas claire.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35]'>&nbsp;
    public BabyResource(BabyUseCase bebeUseCase, BabyDtoAssembler babyDtoAssembler) {
        this.bebeUseCase = bebeUseCase;
        this.babyDtoAssembler = babyDtoAssembler;
    }
&nbsp;
    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createBebe(BabyRequest babyRequest) {
        // Get Bebe dinosaur's parents
        ExternalApiCreationDto externalApiCreationDto;
        externalApiCreationDto = bebeUseCase.getParentsSpecies(babyRequest.fatherName, babyRequest.motherName);
&nbsp;
        // Call to external API
        Client client = ClientBuilder.newClient();
        Response response = client.target("http://localhost:8080/breed").request(MediaType.APPLICATION_JSON)
            .post(Entity.entity(externalApiCreationDto, MediaType.APPLICATION_JSON));
        if (response.getStatusInfo().getFamily().name().equals("SUCCESSFUL")) {
            ExternalApiBebeListDto externalApiBebeListDto = response.readEntity(ExternalApiBebeListDto.class);
            BabyCreationDto dto = babyDtoAssembler.fromRequest(babyRequest, externalApiBebeListDto);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 : Vous n'êtes pas supposez créer le bébé avant l'exécution du tour.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35]'>&nbsp;
    public BabyResource(BabyUseCase bebeUseCase, BabyDtoAssembler babyDtoAssembler) {
        this.bebeUseCase = bebeUseCase;
        this.babyDtoAssembler = babyDtoAssembler;
    }
&nbsp;
    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createBebe(BabyRequest babyRequest) {
        // Get Bebe dinosaur's parents
        ExternalApiCreationDto externalApiCreationDto;
        externalApiCreationDto = bebeUseCase.getParentsSpecies(babyRequest.fatherName, babyRequest.motherName);
&nbsp;
        // Call to external API
        Client client = ClientBuilder.newClient();
        Response response = client.target("http://localhost:8080/breed").request(MediaType.APPLICATION_JSON)
            .post(Entity.entity(externalApiCreationDto, MediaType.APPLICATION_JSON));
        if (response.getStatusInfo().getFamily().name().equals("SUCCESSFUL")) {
            ExternalApiBebeListDto externalApiBebeListDto = response.readEntity(ExternalApiBebeListDto.class);
            BabyCreationDto dto = babyDtoAssembler.fromRequest(babyRequest, externalApiBebeListDto);
</pre></div></li>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 36 à 37 : Votre application ne doit pas être au courant du "comment" ou du "qui" vous obtenez l'information concernant la création de bébés. Ça vous prend une abstraction dans la couche applicative et l'implémentation dans votre couche "infrastructure" qui sert justement à vous protéger.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 26; highlight: [36, 37]'>    public BabyResource(BabyUseCase bebeUseCase, BabyDtoAssembler babyDtoAssembler) {
        this.bebeUseCase = bebeUseCase;
        this.babyDtoAssembler = babyDtoAssembler;
    }
&nbsp;
    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createBebe(BabyRequest babyRequest) {
        // Get Bebe dinosaur's parents
        ExternalApiCreationDto externalApiCreationDto;
        externalApiCreationDto = bebeUseCase.getParentsSpecies(babyRequest.fatherName, babyRequest.motherName);
&nbsp;
        // Call to external API
        Client client = ClientBuilder.newClient();
        Response response = client.target("http://localhost:8080/breed").request(MediaType.APPLICATION_JSON)
            .post(Entity.entity(externalApiCreationDto, MediaType.APPLICATION_JSON));
        if (response.getStatusInfo().getFamily().name().equals("SUCCESSFUL")) {
            ExternalApiBebeListDto externalApiBebeListDto = response.readEntity(ExternalApiBebeListDto.class);
            BabyCreationDto dto = babyDtoAssembler.fromRequest(babyRequest, externalApiBebeListDto);
            bebeUseCase.createBebe(dto);
        }
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>BabyUseCaseTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 19 : public<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 9; highlight: [19]'>import ca.ulaval.glo4002.game.controllers.baby.dtos.BabyCreationDto;
import ca.ulaval.glo4002.game.domain.actions.ActionFactory;
import ca.ulaval.glo4002.game.domain.actions.ActionRepository;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurFactory;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurRepository;
import ca.ulaval.glo4002.game.domain.dinosaur.enums.SpeciesDietsCorrespondances;
import ca.ulaval.glo4002.game.exceptions.types.NotExistentNameException;
import ca.ulaval.glo4002.game.repositories.actions.ActionRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.dinosaur.DinosaurRepositoryInMemory;
&nbsp;
class BabyUseCaseTest {
&nbsp;
    private String name;
    private String fatherName;
    private String motherName;
    private String gender;
    private String species;
    private BabyUseCase babyUseCase;
&nbsp;
    @BeforeEach
    void setUp() {
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>Dinosaur</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 16 : isHungry,  ça s'applique également au SUMO. Si ça vous tente, vous irez lire sur le State pattern.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 6; highlight: [16]'>import ca.ulaval.glo4002.game.domain.dinosaur.enums.DietType;
import ca.ulaval.glo4002.game.domain.dinosaur.enums.SpeciesDietsCorrespondances;
&nbsp;
public class Dinosaur {
    private final String name;
    private final int weight;
    private final String gender;
    private final String species;
    private final int strength;
    private final DietType diet;
    private boolean isNewlyAdded;
&nbsp;
    public Dinosaur(String name, int weight, String gender, String species) {
        this.name = name;
        this.weight = weight;
        this.gender = gender;
        this.species = species;
        this.diet = SpeciesDietsCorrespondances.getDietFromSpecies(species);
        this.isNewlyAdded = true;
        this.strength = calculateStrength();
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 64 à 77 : Les IF dans une classe sont souvent un signe qu'il manque soit une abstraction, une stratégie ou vous pourriez sortir de la logique au moment de la création de l'objet dans une factory.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 54; highlight: [64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77]'>    }
&nbsp;
    public void setNewlyAdded(boolean isNewlyAdded) {
        this.isNewlyAdded = isNewlyAdded;
    }
&nbsp;
    public boolean isHerbivore() {
        return diet.equals(DietType.HERBIVORE);
    }
&nbsp;
    private int calculateStrength() {
        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
        return waterNeed;
    }
&nbsp;
    public int getWaterNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 65 : Pas besoin de nommer la variable "bd" pour bigdecimal. dietMultiplicand c'est beaucoup plus descriptif comme nom.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 55; highlight: [65]'>&nbsp;
    public void setNewlyAdded(boolean isNewlyAdded) {
        this.isNewlyAdded = isNewlyAdded;
    }
&nbsp;
    public boolean isHerbivore() {
        return diet.equals(DietType.HERBIVORE);
    }
&nbsp;
    private int calculateStrength() {
        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 66 : C'est impossible de ne pas avoir de diet.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 56; highlight: [66]'>    public void setNewlyAdded(boolean isNewlyAdded) {
        this.isNewlyAdded = isNewlyAdded;
    }
&nbsp;
    public boolean isHerbivore() {
        return diet.equals(DietType.HERBIVORE);
    }
&nbsp;
    private int calculateStrength() {
        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 71 : C'est impossible de ne pas avoir de gender.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 61; highlight: [71]'>        return diet.equals(DietType.HERBIVORE);
    }
&nbsp;
    private int calculateStrength() {
        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 72 : paranthèses inutiles.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 62; highlight: [72]'>    }
&nbsp;
    private int calculateStrength() {
        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 72 : Cette classe contient beaucoup de Magic Values.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 62; highlight: [72]'>    }
&nbsp;
    private int calculateStrength() {
        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 75 : Si jamais vous n'avez pas de gender ou de diet, votre application lancerait un nullpointerexception et planterait.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 65; highlight: [75]'>        BigDecimal bdDietMultiplicand = null;
        if (diet != null) {
            bdDietMultiplicand = (diet.equals(DietType.CARNIVORE)) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
        return waterNeed;
    }
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 79 à 84 : Ceci est une méthode PRESQUE inutile.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 69; highlight: [79, 80, 81, 82, 83, 84]'>&nbsp;
        BigDecimal bdSexMultiplicand = null;
        if (gender != null) {
            bdSexMultiplicand = (gender.equals("f")) ? new BigDecimal("1.5") : new BigDecimal("1");
        }
&nbsp;
        BigDecimal bdStrength = new BigDecimal(weight).multiply(bdDietMultiplicand).multiply(bdSexMultiplicand);
        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
        return waterNeed;
    }
&nbsp;
    public int getWaterNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdMultiplicand = new BigDecimal("0.6");
&nbsp;
        BigDecimal bdWaterNeed = bdWeight.multiply(bdMultiplicand);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 86 : Mettre private.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 76; highlight: [86]'>        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
        return waterNeed;
    }
&nbsp;
    public int getWaterNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdMultiplicand = new BigDecimal("0.6");
&nbsp;
        BigDecimal bdWaterNeed = bdWeight.multiply(bdMultiplicand);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
            return bdWaterNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
        }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 86 à 123 : Les méthodes getWater et getFood sont pareil à 99%. Vous pouvez sortir la logique commune dans une méthode privée pour éviter la duplication de logique.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 76; highlight: [86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123]'>        return bdStrength.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getWaterQuantityNeeded() {
        int waterNeed = getWaterNeed();
        this.isNewlyAdded = false;
&nbsp;
        return waterNeed;
    }
&nbsp;
    public int getWaterNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdMultiplicand = new BigDecimal("0.6");
&nbsp;
        BigDecimal bdWaterNeed = bdWeight.multiply(bdMultiplicand);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
            return bdWaterNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
        }
&nbsp;
        return bdWaterNeed.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getFoodQuantityNeeded() {
        return getFoodNeed();
    }
&nbsp;
    public int getFoodNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdConsiderationByDietType = new BigDecimal(getConsiderationByDietType());
        BigDecimal bdDividend = new BigDecimal(200);
&nbsp;
        BigDecimal bdTotalFoodNeed = bdWeight.multiply(bdConsiderationByDietType).divide(bdDividend);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
            return bdTotalFoodNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
        }
&nbsp;
        return bdTotalFoodNeed.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    private String getConsiderationByDietType() {
        return this.diet == DietType.HERBIVORE ? "0.5" : "0.2";
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 101 à 103 : Ceci est une méthode inutile.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 91; highlight: [101, 102, 103]'>&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
            return bdWaterNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
        }
&nbsp;
        return bdWaterNeed.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getFoodQuantityNeeded() {
        return getFoodNeed();
    }
&nbsp;
    public int getFoodNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdConsiderationByDietType = new BigDecimal(getConsiderationByDietType());
        BigDecimal bdDividend = new BigDecimal(200);
&nbsp;
        BigDecimal bdTotalFoodNeed = bdWeight.multiply(bdConsiderationByDietType).divide(bdDividend);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 105 : Mettre private.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 95; highlight: [105]'>            return bdWaterNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
        }
&nbsp;
        return bdWaterNeed.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getFoodQuantityNeeded() {
        return getFoodNeed();
    }
&nbsp;
    public int getFoodNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdConsiderationByDietType = new BigDecimal(getConsiderationByDietType());
        BigDecimal bdDividend = new BigDecimal(200);
&nbsp;
        BigDecimal bdTotalFoodNeed = bdWeight.multiply(bdConsiderationByDietType).divide(bdDividend);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
            return bdTotalFoodNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 107 : bdConsiderationByDietType devrait s'appeller dietMultiplicand pour être consistant avec votre méthode précédente.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 97; highlight: [107]'>&nbsp;
        return bdWaterNeed.setScale(0, RoundingMode.CEILING).intValue();
    }
&nbsp;
    public int getFoodQuantityNeeded() {
        return getFoodNeed();
    }
&nbsp;
    public int getFoodNeed() {
        BigDecimal bdWeight = new BigDecimal(this.weight);
        BigDecimal bdConsiderationByDietType = new BigDecimal(getConsiderationByDietType());
        BigDecimal bdDividend = new BigDecimal(200);
&nbsp;
        BigDecimal bdTotalFoodNeed = bdWeight.multiply(bdConsiderationByDietType).divide(bdDividend);
&nbsp;
        if (this.isNewlyAdded()) {
            BigDecimal bdDoubleResourcesNeeds = new BigDecimal(2);
&nbsp;
            return bdTotalFoodNeed.multiply(bdDoubleResourcesNeeds).setScale(0, RoundingMode.CEILING).intValue();
        }
&nbsp;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurBaby</h3>
				<ul>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 3 : L'implémentation d'un bébé fonctionne, mais risque de mal évoluer si le bébé peut vieillir. Chaque bébé qui devient un adulte va devoir être supprimé et reconstruit.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3]'>package ca.ulaval.glo4002.game.domain.dinosaur;
&nbsp;
public class DinosaurBaby extends Dinosaur {
&nbsp;
    private final String fatherName;
    private final String motherName;
&nbsp;
    public DinosaurBaby(String name, int weight, String gender, String species, String fatherName, String motherName) {
        super(name, weight, gender, species);
        this.fatherName = fatherName;
        this.motherName = motherName;
    }
&nbsp;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurFactoryTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 16 : public<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 6; highlight: [16]'>import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;
&nbsp;
import ca.ulaval.glo4002.game.domain.dinosaur.enums.SpeciesDietsCorrespondances;
import ca.ulaval.glo4002.game.exceptions.types.DuplicateNameException;
import ca.ulaval.glo4002.game.exceptions.types.InvalidGenderException;
import ca.ulaval.glo4002.game.exceptions.types.InvalidSpeciesException;
import ca.ulaval.glo4002.game.exceptions.types.InvalidWeightException;
import ca.ulaval.glo4002.game.repositories.dinosaur.DinosaurRepositoryInMemory;
&nbsp;
class DinosaurFactoryTest {
&nbsp;
    private DinosaurFactory dinosaurFactory;
    private DinosaurRepository dinosaurRepository;
    private static final int BABY_WEIGHT = 1;
&nbsp;
    @BeforeEach
    void setUp() {
        SpeciesDietsCorrespondances speciesDietsCorrespondances = new SpeciesDietsCorrespondances();
        dinosaurRepository = new DinosaurRepositoryInMemory();
        dinosaurFactory = new DinosaurFactory(dinosaurRepository, speciesDietsCorrespondances);
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurFactoryTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 14 : Cette classe est dans le mauvais package?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 4; highlight: [14]'>&nbsp;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;
&nbsp;
import ca.ulaval.glo4002.game.domain.dinosaur.Dinosaur;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurFactory;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurRepository;
import ca.ulaval.glo4002.game.domain.dinosaur.enums.SpeciesDietsCorrespondances;
import ca.ulaval.glo4002.game.exceptions.types.DuplicateNameException;
&nbsp;
class DinosaurFactoryTest {
    private DinosaurFactory dinosaurFactory;
    private SpeciesDietsCorrespondances speciesDietsCorrespondances;
&nbsp;
    @BeforeEach
    void setUp() {
        DinosaurRepository dinosaurRepository = mock(DinosaurRepository.class);
        DuplicateNameException duplicateNameException = mock(DuplicateNameException.class);
        dinosaurFactory = new DinosaurFactory(dinosaurRepository, speciesDietsCorrespondances);
&nbsp;
        Dinosaur dinosaur = new Dinosaur("name", 89, "f", "Ankylosaurus");
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 28 à 39 : Code commenté / dead code [C5]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 18; highlight: [28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]'>    @BeforeEach
    void setUp() {
        DinosaurRepository dinosaurRepository = mock(DinosaurRepository.class);
        DuplicateNameException duplicateNameException = mock(DuplicateNameException.class);
        dinosaurFactory = new DinosaurFactory(dinosaurRepository, speciesDietsCorrespondances);
&nbsp;
        Dinosaur dinosaur = new Dinosaur("name", 89, "f", "Ankylosaurus");
        when(dinosaurRepository.findByName("name")).thenReturn(dinosaur);
    }
&nbsp;
//    @Test
//    void whenNameIsValid_thenCreateDinosaur() {
//        dinosaurFactory.create("anotherName", 89, "f", "Ankylosaurus");
//
//        verify(duplicateNameException, never()).getCode();
//    }
&nbsp;
//    @Test
//    void whenNameIsAlreadyTaken_thenThrowsDuplicateNameException() {
//        assertThrows(DuplicateNameException.class, () ->
//                dinosaurFactory.create("name", 89, "f", "Ankylosaurus"));
//    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurRepositoryInMemory</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 14 : Utilisez une tête d'aggrégat comme "Herd".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 4; highlight: [14]'>import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
&nbsp;
import ca.ulaval.glo4002.game.domain.dinosaur.Dinosaur;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurBaby;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurRepository;
&nbsp;
public class DinosaurRepositoryInMemory implements DinosaurRepository {
    private final Map&lt;String, Dinosaur> dinosaursByName = new HashMap&lt;>();
&nbsp;
    @Override
    public List&lt;Dinosaur> findAll() {
        return new ArrayList&lt;>(dinosaursByName.values());
    }
&nbsp;
    @Override
    public Dinosaur findByName(String name) {
        return dinosaursByName.get(name);
    }
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurResource</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 47 : Plus haut, vous utilisez "List<DinosaurDto>", mais ici vous n'osez pas utiliser "List<DinosaurResponse>". Pourquoi? Ça me semble incohérent.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 37; highlight: [47]'>        DinosaurCreationDto dto = dinosaurDtoAssembler.fromRequest(dinosaurRequest);
        dinosaurUseCase.createDinosaur(dto);
&nbsp;
        return Response.status(Response.Status.OK).build();
    }
&nbsp;
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getAllDinosaurs() {
        List&lt;DinosaurDto> dinosaurs = dinosaurUseCase.getAllDinosaurs();
        DinosaursResponse response = dinosaurDtoAssembler.toResponse(dinosaurs);
        return Response.ok().entity(response.items).build();
    }
&nbsp;
    @Path("{name}")
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getDinosaur(@PathParam("name") String name) {
        DinosaurDto dinosaur = dinosaurUseCase.getDinosaur(name);
        DinosaurResponseItem response = dinosaurDtoAssembler.toResponse(dinosaur);
        return Response.ok().entity(response).build();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 48 : Avoir besoin de faire un "response.items" est un smell qui suggère que votre objet "DinosaursResponse" n'est pas bien formatté.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 38; highlight: [48]'>        dinosaurUseCase.createDinosaur(dto);
&nbsp;
        return Response.status(Response.Status.OK).build();
    }
&nbsp;
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getAllDinosaurs() {
        List&lt;DinosaurDto> dinosaurs = dinosaurUseCase.getAllDinosaurs();
        DinosaursResponse response = dinosaurDtoAssembler.toResponse(dinosaurs);
        return Response.ok().entity(response.items).build();
    }
&nbsp;
    @Path("{name}")
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getDinosaur(@PathParam("name") String name) {
        DinosaurDto dinosaur = dinosaurUseCase.getDinosaur(name);
        DinosaurResponseItem response = dinosaurDtoAssembler.toResponse(dinosaur);
        return Response.ok().entity(response).build();
    }
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurResponseItem</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 3 : Le mot "Item" est impertinent. Ça devrait simplement s'appeller un "DinosaurResponse".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3]'>package ca.ulaval.glo4002.game.controllers.dinosaur.dtos;
&nbsp;
public class DinosaurResponseItem {
    public String name;
    public int weight;
    public String gender;
    public String species;
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 10 : public<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.domain.dinosaur;
&nbsp;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
&nbsp;
import static org.junit.jupiter.api.Assertions.assertEquals;
&nbsp;
import ca.ulaval.glo4002.game.domain.dinosaur.enums.DietType;
&nbsp;
class DinosaurTest {
&nbsp;
    private Dinosaur herbivoreFemale;
    private Dinosaur carnivoreMale;
&nbsp;
    @BeforeEach
    void setUp() {
        herbivoreFemale = new Dinosaur("herbivoreFemale", 1000, "f", "Brachiosaurus");
        carnivoreMale = new Dinosaur("carnivoreMale", 50, "m", "Tyrannosaurus Rex");
    }
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 22 : Utilisation de "should" à la place de "then". Incohérent avec le reste de l'application.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 12; highlight: [22]'>    private Dinosaur herbivoreFemale;
    private Dinosaur carnivoreMale;
&nbsp;
    @BeforeEach
    void setUp() {
        herbivoreFemale = new Dinosaur("herbivoreFemale", 1000, "f", "Brachiosaurus");
        carnivoreMale = new Dinosaur("carnivoreMale", 50, "m", "Tyrannosaurus Rex");
    }
&nbsp;
    @Test
    void whenCreatingDinosaur_shouldCalculateStrength() {
        Dinosaur dinosaur = new Dinosaur("Alaska", 1000, "f", "Allosaurus");
        assertEquals(2250, dinosaur.getStrength());
    }
&nbsp;
    @Test
    void whenCreatingDinosaur_shouldCalculateWaterNeeded() {
        Dinosaur dinosaur = new Dinosaur("Will", 1000, "f", "Allosaurus");
        assertEquals(1200, dinosaur.getWaterQuantityNeeded());
    }
&nbsp;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurUseCase</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 à 52 : Toute cette logique n'a qu'un seul test?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52]'>        DinosaurRepository dinosaurRepository,
        DinosaurAssembler dinosaurAssembler,
        ActionRepository actionRepository,
        ActionFactory actionFactory) {
        this.dinosaurFactory = dinosaurFactory;
        this.dinosaurRepository = dinosaurRepository;
        this.dinosaurAssembler = dinosaurAssembler;
        this.actionRepository = actionRepository;
        this.actionFactory = actionFactory;
    }
&nbsp;
    public void createDinosaur(DinosaurCreationDto dto) {
        Dinosaur dinosaur = dinosaurFactory.create(dto.name, dto.weight, dto.gender, dto.species);
        actionRepository.save(actionFactory.create(dinosaur, dinosaurRepository));
    }
&nbsp;
    public List&lt;DinosaurDto> getAllDinosaurs() {
        List&lt;Dinosaur> dinosaurs = dinosaurRepository.findAll();
        return dinosaurAssembler.toDtos(dinosaurs);
    }
&nbsp;
    public DinosaurDto getDinosaur(String name) throws NotExistentNameException {
        if (dinosaurRepository.findByName(name) == null) {
            throw new NotExistentNameException();
        }
        Dinosaur dinosaur = dinosaurRepository.findByName(name);
        return dinosaurAssembler.toDto(dinosaur);
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 46 à 53 : Vous faites deux fois en-ligne le même call à votre base de données. Très peu optimal.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 36; highlight: [46, 47, 48, 49, 50, 51, 52, 53]'>    public void createDinosaur(DinosaurCreationDto dto) {
        Dinosaur dinosaur = dinosaurFactory.create(dto.name, dto.weight, dto.gender, dto.species);
        actionRepository.save(actionFactory.create(dinosaur, dinosaurRepository));
    }
&nbsp;
    public List&lt;DinosaurDto> getAllDinosaurs() {
        List&lt;Dinosaur> dinosaurs = dinosaurRepository.findAll();
        return dinosaurAssembler.toDtos(dinosaurs);
    }
&nbsp;
    public DinosaurDto getDinosaur(String name) throws NotExistentNameException {
        if (dinosaurRepository.findByName(name) == null) {
            throw new NotExistentNameException();
        }
        Dinosaur dinosaur = dinosaurRepository.findByName(name);
        return dinosaurAssembler.toDto(dinosaur);
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>DinosaurUseCaseTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 28 : public<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 18; highlight: [28]'>import ca.ulaval.glo4002.game.domain.dinosaur.enums.SpeciesDietsCorrespondances;
import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
import ca.ulaval.glo4002.game.domain.turn.TurnFactory;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
import ca.ulaval.glo4002.game.exceptions.types.NotExistentNameException;
import ca.ulaval.glo4002.game.repositories.actions.ActionRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.dinosaur.DinosaurRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.resources.ResourceRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.turn.TurnRepositoryInMemory;
&nbsp;
class DinosaurUseCaseTest {
    private DinosaurUseCase dinosaurUseCase;
    private DinosaurDtoAssembler dinosaurDtoAssembler;
    private TurnUseCase turnUseCase;
&nbsp;
    @BeforeEach
    void setUp() {
        SpeciesDietsCorrespondances speciesDietsCorrespondances = new SpeciesDietsCorrespondances();
        ActionRepository actionRepository = new ActionRepositoryInMemory();
        ZooManager zooManager = new ZooManager();
        ActionFactory actionFactory = new ActionFactory();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 29 à 31 : Vous devez mocker les services différents de celui testé.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 19; highlight: [29, 30, 31]'>import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
import ca.ulaval.glo4002.game.domain.turn.TurnFactory;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
import ca.ulaval.glo4002.game.exceptions.types.NotExistentNameException;
import ca.ulaval.glo4002.game.repositories.actions.ActionRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.dinosaur.DinosaurRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.resources.ResourceRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.turn.TurnRepositoryInMemory;
&nbsp;
class DinosaurUseCaseTest {
    private DinosaurUseCase dinosaurUseCase;
    private DinosaurDtoAssembler dinosaurDtoAssembler;
    private TurnUseCase turnUseCase;
&nbsp;
    @BeforeEach
    void setUp() {
        SpeciesDietsCorrespondances speciesDietsCorrespondances = new SpeciesDietsCorrespondances();
        ActionRepository actionRepository = new ActionRepositoryInMemory();
        ZooManager zooManager = new ZooManager();
        ActionFactory actionFactory = new ActionFactory();
&nbsp;
        DinosaurRepository dinosaurRepository = new DinosaurRepositoryInMemory();
        DinosaurFactory dinosaurFactory = new DinosaurFactory(dinosaurRepository, speciesDietsCorrespondances);
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>Eatable</h3>
				<ul>
						<li class='taggable' data-tag='Question'><img src='assets/images/Question.png' />&nbsp;Ligne 3 à 5 : "Eatable" signifit "mangeable". En quoi est-ce qu'un garde-manger c'est mangeable?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3, 4, 5]'>package ca.ulaval.glo4002.game.domain.resources;
&nbsp;
public interface Eatable {
    boolean removeResource(ResourceType resourceType, int quantity);
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ExceptionErrorAndDescription</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 3 : Mauvaise utilisation d'un enum. C'est un fichier de ressources que ça vous prend. L'alternatif, c'est de simplement conserver les constantes ERROR et DESCRIPTION directement dans les mappers, ça fait partit de leur rôle de décider ce qui doit être retournée comme message d'erreur. <img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3]'>package ca.ulaval.glo4002.game.exceptions;
&nbsp;
public enum ExceptionErrorAndDescription {
    INVALID_RESOURCE_QUANTITY("INVALID_RESOURCE_QUANTITY", "Resource quantities must be positive."),
    DUPLICATE_NAME("DUPLICATE_NAME", "The specified name already exists and must be unique."),
    INVALID_GENDER("INVALID_GENDER", "The specified gender must be \"m\" or \"f\"."),
    INVALID_WEIGHT("INVALID_WEIGHT", "The specified weight must be greater than 0."),
    INVALID_SPECIES("INVALID_SPECIES", "The specified species is not supported."),
    NON_EXISTENT_NAME("NON_EXISTENT_NAME", "The specified name does not exist."),
    INVALID_FATHER("INVALID_FATHER", "Father must be a male."),
    INVALID_MOTHER("INVALID_MOTHER", "Mother must be a female.");
&nbsp;
    private final String error;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ExceptionResponse</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 7 à 12 : Pourrais lui-même créer le new ExceptionResponseDto, ça rendrait en plus le DTO inutile.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [7, 8, 9, 10, 11, 12]'>package ca.ulaval.glo4002.game.exceptions;
&nbsp;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
&nbsp;
import ca.ulaval.glo4002.game.exceptions.dtos.ExceptionResponseDto;
&nbsp;
public abstract class ExceptionResponse {
    public Response exceptionResponse(final Response.Status status, final ExceptionResponseDto exceptionResponseDto) {
        return Response.status(status).entity(exceptionResponseDto).type(MediaType.APPLICATION_JSON).build();
    }
}
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 7 à 12 : Pourrais envoyer par défaut un BAD_REQUEST car ça représente 99% des cas d'exceptions.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [7, 8, 9, 10, 11, 12]'>package ca.ulaval.glo4002.game.exceptions;
&nbsp;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
&nbsp;
import ca.ulaval.glo4002.game.exceptions.dtos.ExceptionResponseDto;
&nbsp;
public abstract class ExceptionResponse {
    public Response exceptionResponse(final Response.Status status, final ExceptionResponseDto exceptionResponseDto) {
        return Response.status(status).entity(exceptionResponseDto).type(MediaType.APPLICATION_JSON).build();
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 8 : Ce n'est pas un ExceptionResponse c'est un ExceptionMapper.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [8]'>package ca.ulaval.glo4002.game.exceptions;
&nbsp;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
&nbsp;
import ca.ulaval.glo4002.game.exceptions.dtos.ExceptionResponseDto;
&nbsp;
public abstract class ExceptionResponse {
    public Response exceptionResponse(final Response.Status status, final ExceptionResponseDto exceptionResponseDto) {
        return Response.status(status).entity(exceptionResponseDto).type(MediaType.APPLICATION_JSON).build();
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ExceptionResponseDto</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 3 : L'utilisation de "Request" et "Response" est génial. Par contre, c'est redondant d'ajouter "dto" à la fin. Tout le monde sait que ça va être un "dto".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3]'>package ca.ulaval.glo4002.game.exceptions.dtos;
&nbsp;
public class ExceptionResponseDto {
    public String error;
    public String description;
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>GameServer</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 20 : N'utilisez pas d'objet static.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 10; highlight: [20]'>public class GameServer implements Runnable {
    private static final int PORT = 8181;
&nbsp;
    public static void main(String[] args) {
        new GameServer().run();
    }
&nbsp;
    public void run() {
        Server server = new Server(PORT);
        ServletContextHandler contextHandler = new ServletContextHandler(server, "/");
        ServletContainer container = new ServletContainer(AppConfig.packageConfig);
        ServletHolder servletHolder = new ServletHolder(container);
&nbsp;
        contextHandler.addServlet(servletHolder, "/*");
&nbsp;
        try {
            server.start();
            server.join();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>Pantry</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 55 : Des suppresswarnings c'est un smell.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 45; highlight: [55]'>&nbsp;
        if (resourceElements instanceof Burger) {
            burgerQueue.add(resourceElements);
        } else if (resourceElements instanceof Salad) {
            saladQueue.add(resourceElements);
        } else if (resourceElements instanceof Water) {
            waterQueue.add(resourceElements);
        }
    }
&nbsp;
    @SuppressWarnings("checkstyle:ParameterAssignment")
    @Override
    public boolean removeResource(ResourceType typeResource, int quantity) {
        for (ResourceElements resourceElement : (Queue&lt;ResourceElements>) mapResourceQueue.get(typeResource)) {
            int actualQuantity = resourceElement.getQuantity();
&nbsp;
            boolean enoughQuantity = resourceElement.removeElement(quantity);
            if (enoughQuantity) {
                consumedResources.addResource(typeResource, quantity);
                return true;
            }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 101 : Les méthodes du pantry sont grandes, font beaucoup de choses et sont difficiles à comprendre.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 91; highlight: [101]'>    }
&nbsp;
    public void decreaseExpirationDate() {
        removeAllEmptyResources();
        removeAllExpiredResources();
        for (Map.Entry&lt;ResourceType, Object> entry : mapResourceQueue.entrySet()) {
            for (ResourceElements resourceElement : (Queue&lt;ResourceElements>) entry.getValue()) {
                resourceElement.decreaseExpirationDate();
            }
        }
    }
&nbsp;
    public Resource getConsumedResources() {
        return consumedResources;
    }
&nbsp;
    public Resource getExpiredResources() {
        return expiredResources;
    }
&nbsp;
    public int getFreshResourceQuantity(ResourceType resourceType) {
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>PantryTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 26 : Utilisation de "should" à la place de "then". Incohérent avec le reste de l'application.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 16; highlight: [26]'>        pantry.add(new Salad(400));
        pantry.add(new Water(1000));
    }
&nbsp;
    @Test
    void whenResourcesAreAdded_canTheyBeFound() {
        assertEquals(50, pantry.findFreshResource().getResourceQuantity(BURGER));
    }
&nbsp;
    @Test
    void whenAddingTwoResourceToPantry_shouldIncrementQueue() {
        pantry.add(new Salad(50));
        assertEquals(450, pantry.findFreshResource().getResourceQuantity(SALAD));
&nbsp;
    }
&nbsp;
    @Test
    void whenDrinkingWater_shouldDecrementFreshQueue() {
        pantry.removeResource(WATER, 100);
        assertEquals(900, pantry.findFreshResource().getResourceQuantity(WATER));
    }
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>Resource</h3>
				<ul>
						<li style="text-decoration: line-through;" class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 8 : Mettre au pluriel "Resources" car elle contient plusieurs ressources.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [8]'>package ca.ulaval.glo4002.game.domain.resources;
&nbsp;
import java.util.HashMap;
import java.util.Map;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class Resource {
    private final Map&lt;ResourceType, ResourceElements> resources = new HashMap&lt;>(3) {{
            put(BURGER, new Burger(0));
            put(SALAD, new Salad(0));
            put(WATER, new Water(0));
        }};
&nbsp;
    public Resource() {
        this(new Burger(0), new Salad(0), new Water(0));
    }
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 12 : La date d'expiration d'une resource peut faire partie de la logique de création, donc mettez là dans une factory.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 2; highlight: [12]'>&nbsp;
import java.util.HashMap;
import java.util.Map;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class Resource {
    private final Map&lt;ResourceType, ResourceElements> resources = new HashMap&lt;>(3) {{
            put(BURGER, new Burger(0));
            put(SALAD, new Salad(0));
            put(WATER, new Water(0));
        }};
&nbsp;
    public Resource() {
        this(new Burger(0), new Salad(0), new Water(0));
    }
&nbsp;
    public Resource(Burger burger, Salad salad, Water water) {
        resources.replace(BURGER, burger);
        resources.replace(SALAD, salad);
        resources.replace(WATER, water);
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 12 : En place de stocker une resource, vous pouvez stocker une quantity dans la map.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 2; highlight: [12]'>&nbsp;
import java.util.HashMap;
import java.util.Map;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class Resource {
    private final Map&lt;ResourceType, ResourceElements> resources = new HashMap&lt;>(3) {{
            put(BURGER, new Burger(0));
            put(SALAD, new Salad(0));
            put(WATER, new Water(0));
        }};
&nbsp;
    public Resource() {
        this(new Burger(0), new Salad(0), new Water(0));
    }
&nbsp;
    public Resource(Burger burger, Salad salad, Water water) {
        resources.replace(BURGER, burger);
        resources.replace(SALAD, salad);
        resources.replace(WATER, water);
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 12 : Laissez-faire pour le commentaire sur la quantity. Utilisez ResourceElement, moins compliqué comme changement pour l'instant.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 2; highlight: [12]'>&nbsp;
import java.util.HashMap;
import java.util.Map;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class Resource {
    private final Map&lt;ResourceType, ResourceElements> resources = new HashMap&lt;>(3) {{
            put(BURGER, new Burger(0));
            put(SALAD, new Salad(0));
            put(WATER, new Water(0));
        }};
&nbsp;
    public Resource() {
        this(new Burger(0), new Salad(0), new Water(0));
    }
&nbsp;
    public Resource(Burger burger, Salad salad, Water water) {
        resources.replace(BURGER, burger);
        resources.replace(SALAD, salad);
        resources.replace(WATER, water);
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceAssemblers</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 10 : Pourquoi un "S" à "Assembler"? C'est différent des autres?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.controllers.resources.dtos;
&nbsp;
import java.util.List;
import java.util.stream.Collectors;
&nbsp;
import ca.ulaval.glo4002.game.domain.resources.Resource;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class ResourceAssemblers {
&nbsp;
    public ResourceDto toDto(Resource resource) {
        ResourceDto dto = new ResourceDto();
        dto.qtyBurger = resource.getResourceQuantity(BURGER);
        dto.qtySalad = resource.getResourceQuantity(SALAD);
        dto.qtyWater = resource.getResourceQuantity(WATER);
&nbsp;
        return dto;
    }
&nbsp;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceDtoAssembler</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 6 : Pas testé.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [6]'>package ca.ulaval.glo4002.game.controllers.resources.dtos;
&nbsp;
import java.util.List;
import java.util.stream.Collectors;
&nbsp;
public class ResourceDtoAssembler {
    public ResourceCreationDto fromRequest(ResourceRequest request) {
        ResourceCreationDto dto = new ResourceCreationDto();
&nbsp;
        dto.qtyBurger = request.qtyBurger;
        dto.qtySalad = request.qtySalad;
        dto.qtyWater = request.qtyWater;
&nbsp;
        return dto;
    }
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 9 : Pourquoi il y a un espace ici, mais pas dans les deux autres méthodes?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [9]'>package ca.ulaval.glo4002.game.controllers.resources.dtos;
&nbsp;
import java.util.List;
import java.util.stream.Collectors;
&nbsp;
public class ResourceDtoAssembler {
    public ResourceCreationDto fromRequest(ResourceRequest request) {
        ResourceCreationDto dto = new ResourceCreationDto();
&nbsp;
        dto.qtyBurger = request.qtyBurger;
        dto.qtySalad = request.qtySalad;
        dto.qtyWater = request.qtyWater;
&nbsp;
        return dto;
    }
&nbsp;
    public ResourceResponse toResponse(ResourceDto resourceDto) {
        ResourceResponse response = new ResourceResponse();
        response.qtyBurger = resourceDto.qtyBurger;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceElements</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 3 : ResourceElements c'est un gros smell. Pourquoi pas seulement Resource?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3]'>package ca.ulaval.glo4002.game.domain.resources;
&nbsp;
public abstract class ResourceElements {
    private int quantity;
&nbsp;
    public ResourceElements() {
        this(0);
    }
&nbsp;
    public ResourceElements(int quantity) {
        this.quantity = quantity;
    }
&nbsp;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceFactory</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 8 : Exception pas testée.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [8]'>package ca.ulaval.glo4002.game.domain.resources;
&nbsp;
import ca.ulaval.glo4002.game.exceptions.types.InvalidResourceQuantityException;
&nbsp;
public class ResourceFactory {
    public Resource create(int qtyBurger, int qtySalad, int qtyWater) {
        if (qtyBurger &lt; 0 || qtySalad &lt; 0 || qtyWater &lt; 0) {
            throw new InvalidResourceQuantityException();
        }
&nbsp;
        return new Resource(new Burger(qtyBurger), new Salad(qtySalad), new Water(qtyWater));
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceRepositoryInMemory</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 12 : Le nom devrait être PantryRepository. Ça ne sauvegarde pas une resource???<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 2; highlight: [12]'>&nbsp;
import java.util.Arrays;
import java.util.List;
&nbsp;
import ca.ulaval.glo4002.game.domain.resources.Pantry;
import ca.ulaval.glo4002.game.domain.resources.Resource;
import ca.ulaval.glo4002.game.domain.resources.ResourceElements;
import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
import ca.ulaval.glo4002.game.domain.resources.ResourceType;
&nbsp;
public class ResourceRepositoryInMemory implements ResourceRepository {
    private Pantry pantry = new Pantry();
&nbsp;
    @Override
    public void add(ResourceElements resourceElements) {
        pantry.add(resourceElements);
    }
&nbsp;
    @Override
    public List&lt;Resource> findAll() {
        return Arrays.asList(pantry.findFreshResource(), pantry.getExpiredResources(), pantry.getConsumedResources());
</pre></div></li>
						<li class='taggable' data-tag='Important'><img src='assets/images/Important.png' />&nbsp;Ligne 20 à 43 : BEAUCOUP trop de logique du domaine d'affaires ici. Un repo doit seulement faire des load/save.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 10; highlight: [20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43]'>import ca.ulaval.glo4002.game.domain.resources.ResourceType;
&nbsp;
public class ResourceRepositoryInMemory implements ResourceRepository {
    private Pantry pantry = new Pantry();
&nbsp;
    @Override
    public void add(ResourceElements resourceElements) {
        pantry.add(resourceElements);
    }
&nbsp;
    @Override
    public List&lt;Resource> findAll() {
        return Arrays.asList(pantry.findFreshResource(), pantry.getExpiredResources(), pantry.getConsumedResources());
    }
&nbsp;
    @Override
    public Pantry getPantry() {
        return pantry;
    }
&nbsp;
    @Override
    public int getFreshResourceQuantity(ResourceType resourceType) {
        return pantry.getFreshResourceQuantity(resourceType);
    }
&nbsp;
    @Override
    public void decreaseExpirationDate() {
        pantry.decreaseExpirationDate();
    }
&nbsp;
    @Override
    public boolean removeResources(ResourceType type, int quantity) {
        return pantry.removeResource(type, quantity);
    }
&nbsp;
    @Override
    public void reset() {
        pantry.clear();
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceRepositoryInMemoryTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 19 : Les tests ne contiennent aucun given, différement des tests sur les autres classes.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 9; highlight: [19]'>&nbsp;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
&nbsp;
import ca.ulaval.glo4002.game.domain.resources.Burger;
import ca.ulaval.glo4002.game.domain.resources.Pantry;
import ca.ulaval.glo4002.game.domain.resources.ResourceElements;
import ca.ulaval.glo4002.game.domain.resources.Water;
&nbsp;
class ResourceRepositoryInMemoryTest {
&nbsp;
    @InjectMocks
    private ResourceRepositoryInMemory resourceRepositoryInMemory;
&nbsp;
    @Mock
    private Pantry pantry;
&nbsp;
    @BeforeEach
    void setUp() {
        MockitoAnnotations.initMocks(this);
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 38 : Times(1) c'est la valeur par défaut. Pas besoin de le préciser.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 28; highlight: [38]'>    void setUp() {
        MockitoAnnotations.initMocks(this);
    }
&nbsp;
    @Test
    void whenAddResource_thenResourceIsAddedToPantry() {
        ResourceElements resourceElements = Mockito.mock(ResourceElements.class);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
&nbsp;
        verify(this.pantry, times(1)).add(resourceElements);
    }
&nbsp;
    @Test
    void reposWithBurger_whenFindAllResource_thenRepoIsNotEmpty() {
        ResourceElements resourceElements = new Burger(1);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
&nbsp;
        assertFalse(this.resourceRepositoryInMemory.findAll().isEmpty());
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 42 : Ce qu'on veut tester ce n'est pas "thenRepoIsNotEmpty" c'est "thenContainsBurgers".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 32; highlight: [42]'>    @Test
    void whenAddResource_thenResourceIsAddedToPantry() {
        ResourceElements resourceElements = Mockito.mock(ResourceElements.class);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
&nbsp;
        verify(this.pantry, times(1)).add(resourceElements);
    }
&nbsp;
    @Test
    void reposWithBurger_whenFindAllResource_thenRepoIsNotEmpty() {
        ResourceElements resourceElements = new Burger(1);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
&nbsp;
        assertFalse(this.resourceRepositoryInMemory.findAll().isEmpty());
    }
&nbsp;
    @Test
    void repoWithResource_whenDecreaseExpirationDateResource_thenResourceAreDecreased() {
        ResourceElements resourceElements = new Burger(1);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 47 : Vous ne vérifiez même pas que le burger a été ajouté.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 37; highlight: [47]'>&nbsp;
        verify(this.pantry, times(1)).add(resourceElements);
    }
&nbsp;
    @Test
    void reposWithBurger_whenFindAllResource_thenRepoIsNotEmpty() {
        ResourceElements resourceElements = new Burger(1);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
&nbsp;
        assertFalse(this.resourceRepositoryInMemory.findAll().isEmpty());
    }
&nbsp;
    @Test
    void repoWithResource_whenDecreaseExpirationDateResource_thenResourceAreDecreased() {
        ResourceElements resourceElements = new Burger(1);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
        this.resourceRepositoryInMemory.decreaseExpirationDate();
&nbsp;
        verify(this.pantry, times(1)).decreaseExpirationDate();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 52 à 54 : Les deux premières lignes du test sont inutiles.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 42; highlight: [52, 53, 54]'>    void reposWithBurger_whenFindAllResource_thenRepoIsNotEmpty() {
        ResourceElements resourceElements = new Burger(1);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
&nbsp;
        assertFalse(this.resourceRepositoryInMemory.findAll().isEmpty());
    }
&nbsp;
    @Test
    void repoWithResource_whenDecreaseExpirationDateResource_thenResourceAreDecreased() {
        ResourceElements resourceElements = new Burger(1);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
        this.resourceRepositoryInMemory.decreaseExpirationDate();
&nbsp;
        verify(this.pantry, times(1)).decreaseExpirationDate();
    }
&nbsp;
    @Test
    void reposWithResource_whenResetResource_thenResourceAreReset() {
        ResourceElements resourceElements = new Water(10000);
&nbsp;
        this.resourceRepositoryInMemory.add(resourceElements);
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceResource</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 : Espacement vertical inapproprié [G10]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35]'>&nbsp;
    public ResourceResource(ResourceUseCase resourceUseCase, ResourceDtoAssembler resourceDtoAssembler) {
        this.resourceUseCase = resourceUseCase;
        this.resourceDtoAssembler = resourceDtoAssembler;
    }
&nbsp;
    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createResource(ResourceRequest resourceRequest) {
&nbsp;
        ResourceCreationDto dto = resourceDtoAssembler.fromRequest(resourceRequest);
        resourceUseCase.createResource(dto);
        return Response.status(Response.Status.OK).build();
    }
&nbsp;
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getAllResources() {
        List&lt;ResourceDto> resources = resourceUseCase.getAllResources();
        ResourcesResponse response = resourceDtoAssembler.toResponse(resources);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 46 : Espacement vertical inapproprié [G10]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 36; highlight: [46]'>        ResourceCreationDto dto = resourceDtoAssembler.fromRequest(resourceRequest);
        resourceUseCase.createResource(dto);
        return Response.status(Response.Status.OK).build();
    }
&nbsp;
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getAllResources() {
        List&lt;ResourceDto> resources = resourceUseCase.getAllResources();
        ResourcesResponse response = resourceDtoAssembler.toResponse(resources);
&nbsp;
        return Response.status(Response.Status.OK).entity(response).build();
    }
&nbsp;
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 49 : Espacement vertical inapproprié [G10]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 39; highlight: [49]'>    }
&nbsp;
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getAllResources() {
        List&lt;ResourceDto> resources = resourceUseCase.getAllResources();
        ResourcesResponse response = resourceDtoAssembler.toResponse(resources);
&nbsp;
        return Response.status(Response.Status.OK).entity(response).build();
    }
&nbsp;
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceTest</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 8 : Vous semblez tester les bonnes choses dans cette classe de test. Bravo!<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [8]'>package ca.ulaval.glo4002.game.domain.resources;
&nbsp;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
&nbsp;
import static org.junit.jupiter.api.Assertions.assertEquals;
&nbsp;
public class ResourceTest {
    private Burger burger;
    private Salad salad;
    private Water water;
&nbsp;
    @BeforeEach
    void setUp() {
        burger = new Burger(50);
        salad = new Salad(30);
        water = new Water(100);
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 20 : Commentaire redondant [C3]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 10; highlight: [20]'>    private Salad salad;
    private Water water;
&nbsp;
    @BeforeEach
    void setUp() {
        burger = new Burger(50);
        salad = new Salad(30);
        water = new Water(100);
    }
&nbsp;
    /************************ TESTING RESOURCEELEMENTS IMPLEMENTATIONS ************************/
&nbsp;
    @Test
    void whenCreatingBurger_shouldExpireIn4() {
        assertEquals(4, burger.getDaysLeft());
    }
&nbsp;
    @Test
    void whenCreatingSalad_shouldExpireIn3() {
        assertEquals(3, salad.getDaysLeft());
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 23 : Utilisation de "should" à la place de "then". Incohérent avec le reste de l'application.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 13; highlight: [23]'>    @BeforeEach
    void setUp() {
        burger = new Burger(50);
        salad = new Salad(30);
        water = new Water(100);
    }
&nbsp;
    /************************ TESTING RESOURCEELEMENTS IMPLEMENTATIONS ************************/
&nbsp;
    @Test
    void whenCreatingBurger_shouldExpireIn4() {
        assertEquals(4, burger.getDaysLeft());
    }
&nbsp;
    @Test
    void whenCreatingSalad_shouldExpireIn3() {
        assertEquals(3, salad.getDaysLeft());
    }
&nbsp;
    @Test
    void whenCreatingWater_shouldExpireIn10() {
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 56 à 63 : Vous avez deux tests en 1.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 46; highlight: [56, 57, 58, 59, 60, 61, 62, 63]'>        assertEquals(2, salad.getDaysLeft());
    }
&nbsp;
    @Test
    void whenDecreasingWaterExpirationDate_shouldExpireIn9() {
        water.decreaseExpirationDate();
        assertEquals(9, water.getDaysLeft());
    }
&nbsp;
    /************************ TESTING RESOURCEELEMENTS ************************/
&nbsp;
    @Test
    void whenRemovingResourceElement_shouldDecreaseQuantity() {
        burger.removeElement(49); // there's 50 at the start
        assertEquals(1, burger.getQuantity());
        burger.removeElement(2);
        assertEquals(0, burger.getQuantity());
    }
&nbsp;
    @Test
    void whenResetingResourceElement_quantityShouldEqualZero() {
        salad.reset();
        assertEquals(0, salad.getQuantity());
    }
&nbsp;
    @Test
    void whenSettingResourceElementQuantity_shouldChangeQuantity() {
        water.setQuantity(20);
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceUseCase</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 33 à 37 : Vous n'utilisez jamais le retour de cette méthode. Elle devrait être "void".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 23; highlight: [33, 34, 35, 36, 37]'>&nbsp;
    public ResourceUseCase(ResourceFactory resourceFactory, ResourceRepository resourceRepository, ResourceAssemblers resourceAssemblers,
                           ActionRepository actionRepository, ActionFactory actionFactory) {
        this.resourceFactory = resourceFactory;
        this.resourceRepository = resourceRepository;
        this.resourceAssemblers = resourceAssemblers;
        this.actionRepository = actionRepository;
        this.actionFactory = actionFactory;
    }
&nbsp;
    public ResourceDto createResource(ResourceCreationDto resourceCreationDto) {
        Resource resources = resourceFactory.create(resourceCreationDto.qtyBurger, resourceCreationDto.qtySalad, resourceCreationDto.qtyWater);
        addResourceToActionWaitingList(resources);
        return resourceAssemblers.toDto(resources);
    }
&nbsp;
    public List&lt;ResourceDto> getAllResources() {
        List&lt;Resource> resources = resourceRepository.findAll();
        return resourceAssemblers.toDtos(resources);
    }
&nbsp;
    private void addResourceToActionWaitingList(Resource resources) {
        for (ResourceElements resource : new ArrayList&lt;>(resources.getResources().values())) {
            if (resource.isEmpty()) {
                continue;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 45 : new ArrayList inutile.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 35; highlight: [45]'>        addResourceToActionWaitingList(resources);
        return resourceAssemblers.toDto(resources);
    }
&nbsp;
    public List&lt;ResourceDto> getAllResources() {
        List&lt;Resource> resources = resourceRepository.findAll();
        return resourceAssemblers.toDtos(resources);
    }
&nbsp;
    private void addResourceToActionWaitingList(Resource resources) {
        for (ResourceElements resource : new ArrayList&lt;>(resources.getResources().values())) {
            if (resource.isEmpty()) {
                continue;
            }
&nbsp;
            Action addResources = actionFactory.create(resource, resourceRepository);
            actionRepository.save(addResources);
        }
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 47 : Évitez de faire du code spaghetti. ex: continue.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 37; highlight: [47]'>    }
&nbsp;
    public List&lt;ResourceDto> getAllResources() {
        List&lt;Resource> resources = resourceRepository.findAll();
        return resourceAssemblers.toDtos(resources);
    }
&nbsp;
    private void addResourceToActionWaitingList(Resource resources) {
        for (ResourceElements resource : new ArrayList&lt;>(resources.getResources().values())) {
            if (resource.isEmpty()) {
                continue;
            }
&nbsp;
            Action addResources = actionFactory.create(resource, resourceRepository);
            actionRepository.save(addResources);
        }
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ResourceUseCaseTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 29 : public<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 19; highlight: [29]'>import ca.ulaval.glo4002.game.domain.resources.Resource;
import ca.ulaval.glo4002.game.domain.resources.ResourceFactory;
import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
import ca.ulaval.glo4002.game.domain.turn.TurnFactory;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
import ca.ulaval.glo4002.game.repositories.actions.ActionRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.dinosaur.DinosaurRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.resources.ResourceRepositoryInMemory;
import ca.ulaval.glo4002.game.repositories.turn.TurnRepositoryInMemory;
&nbsp;
class ResourceUseCaseTest {
&nbsp;
    private static final int QYT_BURGER = 4;
    private static final int QYT_SALAD = 5;
    private static final int QYT_WATER = 6;
    private ResourceUseCase resourceUseCase;
    private TurnUseCase turnUseCase;
&nbsp;
    @BeforeEach
    void setUp() {
        ResourceFactory resourceFactory = new ResourceFactory();
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>Turn</h3>
				<ul>
						<li class='taggable' data-tag='Important'><img src='assets/images/Important.png' />&nbsp;Ligne 9 : TRÈS dangereux d'avoir mis le turnNumber PUBLIC et STATIC.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [9]'>package ca.ulaval.glo4002.game.domain.turn;
&nbsp;
import java.util.List;
import java.util.UUID;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
&nbsp;
public class Turn {
    public static int number = 0;
    private final UUID id;
    private final List&lt;Action> actions;
&nbsp;
    public Turn(UUID id, List&lt;Action> actions) {
        this.id = id;
        number++;
        this.actions = actions;
    }
&nbsp;
    public UUID getId() {
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 10 : UUID n'est pas un concept propre au domaine d'affaires.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [10]'>package ca.ulaval.glo4002.game.domain.turn;
&nbsp;
import java.util.List;
import java.util.UUID;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
&nbsp;
public class Turn {
    public static int number = 0;
    private final UUID id;
    private final List&lt;Action> actions;
&nbsp;
    public Turn(UUID id, List&lt;Action> actions) {
        this.id = id;
        number++;
        this.actions = actions;
    }
&nbsp;
    public UUID getId() {
        return id;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 11 : C'est étrange qu'on ne puisse pas ajouté d'action à un tour?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [11]'>package ca.ulaval.glo4002.game.domain.turn;
&nbsp;
import java.util.List;
import java.util.UUID;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
&nbsp;
public class Turn {
    public static int number = 0;
    private final UUID id;
    private final List&lt;Action> actions;
&nbsp;
    public Turn(UUID id, List&lt;Action> actions) {
        this.id = id;
        number++;
        this.actions = actions;
    }
&nbsp;
    public UUID getId() {
        return id;
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 15 : Un constructeur doit SEULEMENT contenir la logique liée à la construction de sa propre classe. La modification d'une variable globale publique dépasse de loin sa portée de responsabilitée.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 5; highlight: [15]'>&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
&nbsp;
public class Turn {
    public static int number = 0;
    private final UUID id;
    private final List&lt;Action> actions;
&nbsp;
    public Turn(UUID id, List&lt;Action> actions) {
        this.id = id;
        number++;
        this.actions = actions;
    }
&nbsp;
    public UUID getId() {
        return id;
    }
&nbsp;
    public List&lt;Action> getActions() {
        return actions;
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 19 : Un objet du domaine ne devrait pas avoir de UUID. C'est un détail applicatif/infrastructure.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 9; highlight: [19]'>    public static int number = 0;
    private final UUID id;
    private final List&lt;Action> actions;
&nbsp;
    public Turn(UUID id, List&lt;Action> actions) {
        this.id = id;
        number++;
        this.actions = actions;
    }
&nbsp;
    public UUID getId() {
        return id;
    }
&nbsp;
    public List&lt;Action> getActions() {
        return actions;
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnAssembler</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 5 : Dead code [G9]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [5]'>package ca.ulaval.glo4002.game.controllers.turn.dtos;
&nbsp;
import ca.ulaval.glo4002.game.domain.turn.Turn;
&nbsp;
public class TurnAssembler {
&nbsp;
    public TurnDto toDto(Turn turn) {
        TurnDto dto = new TurnDto();
        dto.turnNumber = Turn.number;
&nbsp;
        return dto;
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnFactory</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 11 : Pas besoin des constructeurs vides, JAVA les créé par défaut quand aucun constructeur n'est présent.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [11]'>package ca.ulaval.glo4002.game.domain.turn;
&nbsp;
import java.util.List;
import java.util.UUID;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
&nbsp;
public class TurnFactory {
&nbsp;
    public TurnFactory() {
    }
&nbsp;
    public Turn create(List&lt;Action> actions) {
&nbsp;
        return new Turn(UUID.randomUUID(), actions);
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 14 : Espacement vertical inapproprié [G10]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 4; highlight: [14]'>import java.util.UUID;
&nbsp;
import ca.ulaval.glo4002.game.domain.actions.Action;
&nbsp;
public class TurnFactory {
&nbsp;
    public TurnFactory() {
    }
&nbsp;
    public Turn create(List&lt;Action> actions) {
&nbsp;
        return new Turn(UUID.randomUUID(), actions);
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnRepositoryInMemory</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 11 : Votre UUID est inutile. La map est trop compliqué pour rien. List<Turn> aurait été suffisant. Cependant, évitez de persister des Listes ou des Maps, etc. Cherchez plutôt à créer des têtes d'aggrégats qui va contenir la liste de turn.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [11]'>package ca.ulaval.glo4002.game.repositories.turn;
&nbsp;
import java.util.HashMap;
import java.util.Map;
import java.util.UUID;
&nbsp;
import ca.ulaval.glo4002.game.domain.turn.Turn;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
&nbsp;
public class TurnRepositoryInMemory implements TurnRepository {
    private final Map&lt;UUID, Turn> turnsById = new HashMap&lt;>();
&nbsp;
    @Override
    public void save(Turn turn) {
        turnsById.put(turn.getId(), turn);
    }
&nbsp;
    @Override
    public Turn findById(UUID id) {
        return turnsById.get(id);
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 18 à 21 : Dead code [G9]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 8; highlight: [18, 19, 20, 21]'>import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
&nbsp;
public class TurnRepositoryInMemory implements TurnRepository {
    private final Map&lt;UUID, Turn> turnsById = new HashMap&lt;>();
&nbsp;
    @Override
    public void save(Turn turn) {
        turnsById.put(turn.getId(), turn);
    }
&nbsp;
    @Override
    public Turn findById(UUID id) {
        return turnsById.get(id);
    }
&nbsp;
    @Override
    public void reset() {
        turnsById.clear();
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnRepositoryInMemoryTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 18 : Vous voulez tester l'implementation TurnRepositoryInMemory et non son interface.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 8; highlight: [18]'>import org.mockito.Mockito;
import org.mockito.MockitoAnnotations;
&nbsp;
import static org.junit.jupiter.api.Assertions.*;
&nbsp;
import ca.ulaval.glo4002.game.domain.turn.Turn;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
&nbsp;
class TurnRepositoryInMemoryTest {
&nbsp;
    private TurnRepository turnRepository;
    private UUID fakeTurnId = UUID.fromString("4321-34-56-78-987654");
&nbsp;
    @Mock
    private Turn turn1;
&nbsp;
    @Mock
    private Turn turn2;
&nbsp;
&nbsp;
    @BeforeEach
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 19 : Peut être final.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 9; highlight: [19]'>import org.mockito.MockitoAnnotations;
&nbsp;
import static org.junit.jupiter.api.Assertions.*;
&nbsp;
import ca.ulaval.glo4002.game.domain.turn.Turn;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
&nbsp;
class TurnRepositoryInMemoryTest {
&nbsp;
    private TurnRepository turnRepository;
    private UUID fakeTurnId = UUID.fromString("4321-34-56-78-987654");
&nbsp;
    @Mock
    private Turn turn1;
&nbsp;
    @Mock
    private Turn turn2;
&nbsp;
&nbsp;
    @BeforeEach
    void setUp() {
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 26 : Espacement vertical inapproprié [G10]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 16; highlight: [26]'>class TurnRepositoryInMemoryTest {
&nbsp;
    private TurnRepository turnRepository;
    private UUID fakeTurnId = UUID.fromString("4321-34-56-78-987654");
&nbsp;
    @Mock
    private Turn turn1;
&nbsp;
    @Mock
    private Turn turn2;
&nbsp;
&nbsp;
    @BeforeEach
    void setUp() {
        MockitoAnnotations.initMocks(this);
        this.turnRepository = new TurnRepositoryInMemory();
    }
&nbsp;
    @Test
    void whenGetAturnWithCorrectId_thenRightTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 : C'est quoi un "correct" id et un "right" turn?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35]'>    private Turn turn2;
&nbsp;
&nbsp;
    @BeforeEach
    void setUp() {
        MockitoAnnotations.initMocks(this);
        this.turnRepository = new TurnRepositoryInMemory();
    }
&nbsp;
    @Test
    void whenGetAturnWithCorrectId_thenRightTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNotNull(turnRepository.findById(idTurn1));
        assertEquals(turn1.getId(), turnRepository.findById(idTurn1).getId());
    }
&nbsp;
    @Test
    void quandRecupereUnTourAvecLebonId_alorsBonTourEstRetourner() {
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 : Suggestion: givenATurn_whenFindingThatTurnById_thenThatTurnIsReturned<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35]'>    private Turn turn2;
&nbsp;
&nbsp;
    @BeforeEach
    void setUp() {
        MockitoAnnotations.initMocks(this);
        this.turnRepository = new TurnRepositoryInMemory();
    }
&nbsp;
    @Test
    void whenGetAturnWithCorrectId_thenRightTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNotNull(turnRepository.findById(idTurn1));
        assertEquals(turn1.getId(), turnRepository.findById(idTurn1).getId());
    }
&nbsp;
    @Test
    void quandRecupereUnTourAvecLebonId_alorsBonTourEstRetourner() {
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 38 : Votre when devrait dans le milieu de votre test. Présentement, le save c'est votre given et n'a pas d'affaires là.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 28; highlight: [38]'>    @BeforeEach
    void setUp() {
        MockitoAnnotations.initMocks(this);
        this.turnRepository = new TurnRepositoryInMemory();
    }
&nbsp;
    @Test
    void whenGetAturnWithCorrectId_thenRightTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNotNull(turnRepository.findById(idTurn1));
        assertEquals(turn1.getId(), turnRepository.findById(idTurn1).getId());
    }
&nbsp;
    @Test
    void quandRecupereUnTourAvecLebonId_alorsBonTourEstRetourner() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 45 : Ce test est pareil que l'autre d'avant, mais en français et BEAUCOUP meilleure, au point ou le test d'avant est rendu complètement inutile.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 35; highlight: [45]'>    void whenGetAturnWithCorrectId_thenRightTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNotNull(turnRepository.findById(idTurn1));
        assertEquals(turn1.getId(), turnRepository.findById(idTurn1).getId());
    }
&nbsp;
    @Test
    void quandRecupereUnTourAvecLebonId_alorsBonTourEstRetourner() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertEquals(turn1, turnRepository.findById(idTurn1));
    }
&nbsp;
    @Test
    void whenGetOneTurnWithTheBadId_thenNoneTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 55 : Dead code [G9]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 45; highlight: [55]'>    void quandRecupereUnTourAvecLebonId_alorsBonTourEstRetourner() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertEquals(turn1, turnRepository.findById(idTurn1));
    }
&nbsp;
    @Test
    void whenGetOneTurnWithTheBadId_thenNoneTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNull(turnRepository.findById(fakeTurnId));
    }
&nbsp;
    @Test
    void repoContainsTwoTurns_whenResetTurns_thenRepoContainsNoMoreTurn() {
        UUID idTurn1 = setTurnMock1();
        UUID idTurn2 = setTurnMock2();
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 63 : givenTurns_whenResetting_thenRepoIsNull<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 53; highlight: [63]'>    @Test
    void whenGetOneTurnWithTheBadId_thenNoneTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNull(turnRepository.findById(fakeTurnId));
    }
&nbsp;
    @Test
    void repoContainsTwoTurns_whenResetTurns_thenRepoContainsNoMoreTurn() {
        UUID idTurn1 = setTurnMock1();
        UUID idTurn2 = setTurnMock2();
&nbsp;
        turnRepository.save(turn1);
        turnRepository.save(turn2);
&nbsp;
        turnRepository.reset();
&nbsp;
        assertNotEquals(turn1, turnRepository.findById(idTurn1));
        assertNotEquals(turn2, turnRepository.findById(idTurn2));
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 63 : Scuse, votre then est meilleure que le mien suggéré. J'aime beaucoup plus "thenRepoContainsNoMoreTurns" car c'est plus proche du vocabulaire d'affaires.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 53; highlight: [63]'>    @Test
    void whenGetOneTurnWithTheBadId_thenNoneTurnIsReturned() {
        UUID idTurn1 = setTurnMock1();
&nbsp;
        turnRepository.save(turn1);
&nbsp;
        assertNull(turnRepository.findById(fakeTurnId));
    }
&nbsp;
    @Test
    void repoContainsTwoTurns_whenResetTurns_thenRepoContainsNoMoreTurn() {
        UUID idTurn1 = setTurnMock1();
        UUID idTurn2 = setTurnMock2();
&nbsp;
        turnRepository.save(turn1);
        turnRepository.save(turn2);
&nbsp;
        turnRepository.reset();
&nbsp;
        assertNotEquals(turn1, turnRepository.findById(idTurn1));
        assertNotEquals(turn2, turnRepository.findById(idTurn2));
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnResource</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 33 : L'utilisateur ici ne cherche pas à créer un tour! Il veut "Exécuter" ou "Jouer" un tour. La création du prochain tour est un détail d'implémentation. Ça ne devrait pas être le nom de la méthode.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 23; highlight: [33]'>                        TurnDtoAssembler turnDtoAssembler) {
        this.turnUseCase = turnUseCase;
        this.turnDtoAssembler = turnDtoAssembler;
    }
&nbsp;
    @Path("/turn")
    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createTurn() {
        turnUseCase.createTurn();
&nbsp;
        TurnDto turnDto = new TurnDto();
        turnDto.turnNumber = Turn.number;
        TurnResponse response = turnDtoAssembler.toResponse(turnDto);
&nbsp;
        return Response.status(Response.Status.OK).entity(response).build();
    }
&nbsp;
    @Path("/reset")
    @POST
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 33 : Utilisation de "returns" à la place de "then". Incohérent avec le reste de l'application.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 23; highlight: [33]'>        turn = new Turn(id, actions);
    }
&nbsp;
    @Test
    void whenAsked_returnsCorrectId() {
        assertEquals(id, turn.getId());
        Turn.number = 1;
    }
&nbsp;
    @Test
    void whenAsked_returnsActionsList() {
        assertEquals(actions, turn.getActions());
        Turn.number = 1;
    }
&nbsp;
    @Test
    void whenTurnIsPlayed_incrementsTurn() {
        assertEquals(2, Turn.number);
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 35 : Setter le Turn.number à 1 a aucun rapport avec le test.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 25; highlight: [35]'>&nbsp;
    @Test
    void whenAsked_returnsCorrectId() {
        assertEquals(id, turn.getId());
        Turn.number = 1;
    }
&nbsp;
    @Test
    void whenAsked_returnsActionsList() {
        assertEquals(actions, turn.getActions());
        Turn.number = 1;
    }
&nbsp;
    @Test
    void whenTurnIsPlayed_incrementsTurn() {
        assertEquals(2, Turn.number);
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 38 à 41 : On voit que l'utilisation d'un Turn.number static rend vos tests très fragiles.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 28; highlight: [38, 39, 40, 41]'>        assertEquals(id, turn.getId());
        Turn.number = 1;
    }
&nbsp;
    @Test
    void whenAsked_returnsActionsList() {
        assertEquals(actions, turn.getActions());
        Turn.number = 1;
    }
&nbsp;
    @Test
    void whenTurnIsPlayed_incrementsTurn() {
        assertEquals(2, Turn.number);
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnUseCase</h3>
				<ul>
						<li class='taggable' data-tag='null'>Ligne 19 : Le nom "UseCase" fait référence à une méthodologie de travail. Utilisez "TurnService".<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 9; highlight: [19]'>import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurBaby;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurRepository;
import ca.ulaval.glo4002.game.domain.resources.Burger;
import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
import ca.ulaval.glo4002.game.domain.resources.Salad;
import ca.ulaval.glo4002.game.domain.resources.Water;
import ca.ulaval.glo4002.game.domain.turn.Turn;
import ca.ulaval.glo4002.game.domain.turn.TurnFactory;
import ca.ulaval.glo4002.game.domain.turn.TurnRepository;
&nbsp;
public class TurnUseCase {
&nbsp;
    private final TurnFactory turnFactory;
    private final TurnRepository turnRepository;
    private final ResourceRepository resourceRepository;
    private final ActionRepository actionRepository;
    private final DinosaurRepository dinosaurRepository;
    private final ZooManager zooManager;
&nbsp;
    public TurnUseCase(
        TurnFactory turnFactory,
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 53 à 82 : Ce sont les seules méthodes "protected" de l'application? Normalement, c'est un contrôle de visibilité utilisé dans l'implémentation d'abstraction ou lors d'héritage.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 43; highlight: [53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82]'>    public void createTurn() {
        List&lt;Action> actions = actionRepository.getWaitingActions();
        cookIt();
&nbsp;
        actionRepository.execute();
        postAction();
&nbsp;
        Turn turn = turnFactory.create(actions);
        turnRepository.save(turn);
    }
&nbsp;
    protected void cookIt() {
        resourceRepository.add(new Burger(100));
        resourceRepository.add(new Salad(250));
        resourceRepository.add(new Water(10000));
    }
&nbsp;
    private void postAction() {
        resourceRepository.decreaseExpirationDate();
        feedDinosaurs();
        removeBabyDinosaurs();
    }
&nbsp;
    protected void feedDinosaurs() {
        feedDinosaursByDietType(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
&nbsp;
    protected void removeBabyDinosaurs() {
        removeBabyDinosaur(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
    protected void feedDinosaursByDietType(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        boolean isStarving;
&nbsp;
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    private void removeBabyDinosaur(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            if (dinosaur instanceof DinosaurBaby && dinosaurRepository.areBothParentsDead(dinosaur)) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    public void reset() {
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 70 : Mauvais nom de méthode.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 60; highlight: [70]'>    private void postAction() {
        resourceRepository.decreaseExpirationDate();
        feedDinosaurs();
        removeBabyDinosaurs();
    }
&nbsp;
    protected void feedDinosaurs() {
        feedDinosaursByDietType(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
&nbsp;
    protected void removeBabyDinosaurs() {
        removeBabyDinosaur(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
    protected void feedDinosaursByDietType(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        boolean isStarving;
&nbsp;
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 71 : Pourquoi vous recevez la liste en ordre de force? Ce n'est vraiment pas nécessaire.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 61; highlight: [71]'>        resourceRepository.decreaseExpirationDate();
        feedDinosaurs();
        removeBabyDinosaurs();
    }
&nbsp;
    protected void feedDinosaurs() {
        feedDinosaursByDietType(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
&nbsp;
    protected void removeBabyDinosaurs() {
        removeBabyDinosaur(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
    protected void feedDinosaursByDietType(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        boolean isStarving;
&nbsp;
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
        }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 73 : Manque un espace pour séparer les deux méthodes.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 63; highlight: [73]'>        removeBabyDinosaurs();
    }
&nbsp;
    protected void feedDinosaurs() {
        feedDinosaursByDietType(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
&nbsp;
    protected void removeBabyDinosaurs() {
        removeBabyDinosaur(dinosaurRepository.getSortedDinosaursByStrengthThenName());
    }
    protected void feedDinosaursByDietType(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        boolean isStarving;
&nbsp;
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 84 : Mauvais nom de méthode.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 74; highlight: [84]'>        boolean isStarving;
&nbsp;
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    private void removeBabyDinosaur(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            if (dinosaur instanceof DinosaurBaby && dinosaurRepository.areBothParentsDead(dinosaur)) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    public void reset() {
        turnRepository.reset();
        resourceRepository.reset();
</pre></div></li>
						<li class='taggable' data-tag='null'>Ligne 84 à 90 : Pour la prochaine revue de code, essayez de trouver un moyen de rendre le retrait des bébés qui meurt, lorsque leurs deux parents sont morts, récursif. C'est un beau défi et ça mène à du code qui évolu mieux. ;)<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 74; highlight: [84, 85, 86, 87, 88, 89, 90]'>        boolean isStarving;
&nbsp;
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    private void removeBabyDinosaur(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            if (dinosaur instanceof DinosaurBaby && dinosaurRepository.areBothParentsDead(dinosaur)) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    public void reset() {
        turnRepository.reset();
        resourceRepository.reset();
        dinosaurRepository.reset();
        actionRepository.reset();
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 87 : non testé.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 77; highlight: [87]'>            isStarving = zooManager.feedThenCheckIfStarving(resourceRepository.getPantry(), dinosaur);
            if (isStarving) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    private void removeBabyDinosaur(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            if (dinosaur instanceof DinosaurBaby && dinosaurRepository.areBothParentsDead(dinosaur)) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    public void reset() {
        turnRepository.reset();
        resourceRepository.reset();
        dinosaurRepository.reset();
        actionRepository.reset();
    }
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 93 : non testé.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 83; highlight: [93]'>&nbsp;
    private void removeBabyDinosaur(List&lt;Dinosaur> sortedDinosaursByStrengthThenName) {
        for (Dinosaur dinosaur : sortedDinosaursByStrengthThenName) {
            if (dinosaur instanceof DinosaurBaby && dinosaurRepository.areBothParentsDead(dinosaur)) {
                dinosaurRepository.remove(dinosaur);
            }
        }
    }
&nbsp;
    public void reset() {
        turnRepository.reset();
        resourceRepository.reset();
        dinosaurRepository.reset();
        actionRepository.reset();
    }
}
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>TurnUseCaseTest</h3>
				<ul>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 20 : public<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 10; highlight: [20]'>import org.mockito.MockitoAnnotations;
&nbsp;
import static org.mockito.Mockito.*;
&nbsp;
import ca.ulaval.glo4002.game.application.manager.ZooManager;
import ca.ulaval.glo4002.game.domain.dinosaur.Dinosaur;
import ca.ulaval.glo4002.game.domain.dinosaur.DinosaurRepository;
import ca.ulaval.glo4002.game.domain.resources.Pantry;
import ca.ulaval.glo4002.game.domain.resources.ResourceRepository;
&nbsp;
class TurnUseCaseTest {
&nbsp;
    @Mock
    private ResourceRepository resourceRepository;
    @Mock
    private DinosaurRepository dinosaurRepository;
    @Mock
    private ZooManager zooManager;
    @Mock
    private Pantry pantry;
&nbsp;
</pre></div></li>
				</div>
				<div id='file-comments'>
					<h3 class=foldable>ZooManager</h3>
				<ul>
						<li class='taggable' data-tag='Architecture'><img src='assets/images/Architecture.png' />&nbsp;Ligne 3 : Pourquoi un package Manager quand c'est simplement utilisé par votre pantry qui fait partie de vos ressources?<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [3]'>package ca.ulaval.glo4002.game.application.manager;
&nbsp;
import ca.ulaval.glo4002.game.domain.dinosaur.Dinosaur;
import ca.ulaval.glo4002.game.domain.resources.Eatable;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class ZooManager {
&nbsp;
    public boolean feedThenCheckIfStarving(Eatable eatable, Dinosaur dinosaur) {
&nbsp;
        boolean isStarving = (dinosaur.isHerbivore()) ? !eatable.removeResource(SALAD, dinosaur.getFoodQuantityNeeded()) :
            !eatable.removeResource(BURGER, dinosaur.getFoodQuantityNeeded());
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 11 : Espacement vertical inapproprié [G10]<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 1; highlight: [11]'>package ca.ulaval.glo4002.game.application.manager;
&nbsp;
import ca.ulaval.glo4002.game.domain.dinosaur.Dinosaur;
import ca.ulaval.glo4002.game.domain.resources.Eatable;
&nbsp;
import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class ZooManager {
&nbsp;
    public boolean feedThenCheckIfStarving(Eatable eatable, Dinosaur dinosaur) {
&nbsp;
        boolean isStarving = (dinosaur.isHerbivore()) ? !eatable.removeResource(SALAD, dinosaur.getFoodQuantityNeeded()) :
            !eatable.removeResource(BURGER, dinosaur.getFoodQuantityNeeded());
&nbsp;
        if (!eatable.removeResource(WATER, dinosaur.getWaterQuantityNeeded())) {
            isStarving = true;
        }
        return isStarving;
    }
}
</pre></div></li>
						<li class='taggable' data-tag='CleanCode'><img src='assets/images/CleanCode.png' />&nbsp;Ligne 16 : non testé.<img src='assets/images/snippet.png' class='show_snippet' /><div class='snippet'><pre class='brush: java; first-line: 6; highlight: [16]'>import static ca.ulaval.glo4002.game.domain.resources.ResourceType.*;
&nbsp;
public class ZooManager {
&nbsp;
    public boolean feedThenCheckIfStarving(Eatable eatable, Dinosaur dinosaur) {
&nbsp;
        boolean isStarving = (dinosaur.isHerbivore()) ? !eatable.removeResource(SALAD, dinosaur.getFoodQuantityNeeded()) :
            !eatable.removeResource(BURGER, dinosaur.getFoodQuantityNeeded());
&nbsp;
        if (!eatable.removeResource(WATER, dinosaur.getWaterQuantityNeeded())) {
            isStarving = true;
        }
        return isStarving;
    }
}
</pre></div></li>
				</div>
			</div>

			<div id='footer'>
				<ul id='legend'>
					<li><img src='assets/images/Architecture.png' />&nbsp;Architecture</li>
					<li><img src='assets/images/Important.png' />&nbsp;Important</li>
					<li><img src='assets/images/CleanCode.png' />&nbsp;CleanCode</li>
					<li><img src='assets/images/Question.png' />&nbsp;Question</li>
				</ul>
				<p>Tous les num&eacute;ros entre [crochets] sont des r&eacute;f&eacute;rences aux 'bad smells' du chapitre 17 de Clean Code</p>
				<p>Generated with &copy;ReviewHelper on Sat Oct 23 00:48:43 CLST 2021</p>
		</div>
	</body>
</html>